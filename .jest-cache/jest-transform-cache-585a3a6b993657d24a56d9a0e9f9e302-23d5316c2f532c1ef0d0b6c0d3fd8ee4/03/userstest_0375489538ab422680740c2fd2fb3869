33a222e51f8fd721795dc4aa5cc16c8c
"use strict";
/**
 * User Management Endpoint Tests
 * Tests for /api/v1/users/* endpoints
 */
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const utils_1 = require("../utils");
(0, globals_1.describe)('User Management Endpoints', () => {
    let testUser;
    let searchTargetUser;
    (0, globals_1.beforeAll)(async () => {
        // Create test users
        testUser = await utils_1.testUtils.createUser({
            email: 'user-search-test@emapay.test',
            metadata: { purpose: 'User Search Testing' }
        });
        // Create a user to search for
        searchTargetUser = await utils_1.testUtils.createUser({
            email: 'search-target@emapay.test',
            metadata: {
                purpose: 'Search Target',
                firstName: 'João',
                lastName: 'Silva',
                phone: '+244900123456'
            }
        });
    });
    (0, globals_1.afterAll)(async () => {
        // Clean up test users
        await utils_1.testUtils.cleanup();
    });
    (0, globals_1.describe)('GET /api/v1/users/search - Valid Queries', () => {
        (0, globals_1.test)('should search users by email', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=search-target@emapay.test', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.email === 'search-target@emapay.test');
            (0, globals_1.expect)(foundUser).toBeDefined();
            (0, globals_1.expect)(foundUser.userId).toBe(searchTargetUser.id);
            // Assert response time
            utils_1.testUtils.assertResponseTime(response, 200);
        });
        (0, globals_1.test)('should search users by partial email', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=search-target', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.email === 'search-target@emapay.test');
            (0, globals_1.expect)(foundUser).toBeDefined();
        });
        (0, globals_1.test)('should search users by phone number', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=+244900123456', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.phone === '+244900123456');
            (0, globals_1.expect)(foundUser).toBeDefined();
            (0, globals_1.expect)(foundUser.userId).toBe(searchTargetUser.id);
        });
        (0, globals_1.test)('should search users by partial phone number', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=900123456', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.phone === '+244900123456');
            (0, globals_1.expect)(foundUser).toBeDefined();
        });
        (0, globals_1.test)('should search users by first name', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=João', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.firstName === 'João');
            (0, globals_1.expect)(foundUser).toBeDefined();
            (0, globals_1.expect)(foundUser.userId).toBe(searchTargetUser.id);
        });
        (0, globals_1.test)('should search users by last name', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=Silva', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.lastName === 'Silva');
            (0, globals_1.expect)(foundUser).toBeDefined();
            (0, globals_1.expect)(foundUser.userId).toBe(searchTargetUser.id);
        });
        (0, globals_1.test)('should search users by full name', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=João Silva', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.firstName === 'João' && user.lastName === 'Silva');
            (0, globals_1.expect)(foundUser).toBeDefined();
            (0, globals_1.expect)(foundUser.userId).toBe(searchTargetUser.id);
        });
        (0, globals_1.test)('should handle case-insensitive search', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=joão silva', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeGreaterThan(0);
            const foundUser = searchResults.find((user) => user.firstName === 'João' && user.lastName === 'Silva');
            (0, globals_1.expect)(foundUser).toBeDefined();
        });
        (0, globals_1.test)('should limit search results', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&limit=5', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeLessThanOrEqual(5);
        });
        (0, globals_1.test)('should handle pagination', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&limit=2&offset=0', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBeLessThanOrEqual(2);
        });
    });
    (0, globals_1.describe)('GET /api/v1/users/search - Invalid Queries', () => {
        (0, globals_1.test)('should return empty array for non-existent user', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=nonexistent@example.com', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            (0, globals_1.expect)(searchResults.length).toBe(0);
        });
        (0, globals_1.test)('should return 400 for missing query parameter', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('query');
        });
        (0, globals_1.test)('should return 400 for empty query parameter', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('query');
        });
        (0, globals_1.test)('should return 400 for query too short', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=a', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('minimum');
        });
        (0, globals_1.test)('should return 400 for query too long', async () => {
            const longQuery = 'a'.repeat(101); // Assuming 100 char limit
            const response = await utils_1.testUtils.get(`/api/v1/users/search?q=${longQuery}`, testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('maximum');
        });
        (0, globals_1.test)('should return 400 for invalid limit parameter', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&limit=invalid', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('limit');
        });
        (0, globals_1.test)('should return 400 for negative limit', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&limit=-1', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('limit');
        });
        (0, globals_1.test)('should return 400 for limit too high', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&limit=1000', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('limit');
        });
        (0, globals_1.test)('should return 400 for invalid offset parameter', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&offset=invalid', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('offset');
        });
        (0, globals_1.test)('should return 400 for negative offset', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&offset=-1', testUser);
            utils_1.testUtils.assertErrorResponse(response, 400);
            (0, globals_1.expect)(response.body.error).toContain('offset');
        });
        (0, globals_1.test)('should handle malformed email queries gracefully', async () => {
            const malformedEmails = [
                'invalid-email',
                '@invalid.com',
                'test@',
                'test@@invalid.com',
                'test@invalid@.com'
            ];
            for (const email of malformedEmails) {
                const response = await utils_1.testUtils.get(`/api/v1/users/search?q=${encodeURIComponent(email)}`, testUser);
                // Should return empty results, not error
                const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
                (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            }
        });
        (0, globals_1.test)('should handle special characters in query', async () => {
            const specialChars = ['!@#$%^&*()', '<script>', 'DROP TABLE', '\'OR 1=1--'];
            for (const query of specialChars) {
                const response = await utils_1.testUtils.get(`/api/v1/users/search?q=${encodeURIComponent(query)}`, testUser);
                // Should return empty results, not error
                const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
                (0, globals_1.expect)(Array.isArray(searchResults)).toBe(true);
            }
        });
    });
    (0, globals_1.describe)('User Search Privacy', () => {
        (0, globals_1.test)('should return limited user data in search results', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=search-target@emapay.test', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            const foundUser = searchResults[0];
            // Should include public fields
            (0, globals_1.expect)(foundUser).toHaveProperty('userId');
            (0, globals_1.expect)(foundUser).toHaveProperty('firstName');
            (0, globals_1.expect)(foundUser).toHaveProperty('lastName');
            (0, globals_1.expect)(foundUser).toHaveProperty('email');
            // Should NOT include sensitive fields
            (0, globals_1.expect)(foundUser).not.toHaveProperty('password');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('pin');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('pinHash');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('accessToken');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('refreshToken');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('privateKey');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('internalId');
        });
        (0, globals_1.test)('should not expose full phone numbers to non-contacts', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=João', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            const foundUser = searchResults.find((user) => user.firstName === 'João');
            if (foundUser.phone) {
                // Phone should be masked or partially hidden
                (0, globals_1.expect)(foundUser.phone).toMatch(/\*+/); // Contains asterisks for masking
                (0, globals_1.expect)(foundUser.phone).not.toBe('+244900123456'); // Not full number
            }
        });
        (0, globals_1.test)('should not return user own data in search results', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=user-search-test@emapay.test', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            // User should not find themselves in search results
            const selfResult = searchResults.find((user) => user.userId === testUser.id);
            (0, globals_1.expect)(selfResult).toBeUndefined();
        });
        (0, globals_1.test)('should limit search results to prevent data mining', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test&limit=100', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            // Should enforce maximum limit (e.g., 20 users max)
            (0, globals_1.expect)(searchResults.length).toBeLessThanOrEqual(20);
        });
        (0, globals_1.test)('should not expose user creation dates or metadata', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=search-target@emapay.test', testUser);
            const searchResults = utils_1.testUtils.assertSuccessResponse(response, 200);
            const foundUser = searchResults[0];
            // Should NOT include metadata
            (0, globals_1.expect)(foundUser).not.toHaveProperty('createdAt');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('updatedAt');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('lastLogin');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('metadata');
            (0, globals_1.expect)(foundUser).not.toHaveProperty('purpose');
        });
    });
    (0, globals_1.describe)('User Search Authorization', () => {
        (0, globals_1.test)('should require authentication', async () => {
            const response = await utils_1.testUtils.publicGet('/api/v1/users/search?q=test');
            utils_1.testUtils.assertErrorResponse(response, 401);
            (0, globals_1.expect)(response.body.error).toContain('authorization');
        });
        (0, globals_1.test)('should reject invalid JWT tokens', async () => {
            const response = await utils_1.testUtils.testWithInvalidToken('GET', '/api/v1/users/search?q=test');
            utils_1.testUtils.assertErrorResponse(response, 401);
            (0, globals_1.expect)(response.body.error).toContain('token');
        });
        (0, globals_1.test)('should reject expired JWT tokens', async () => {
            const response = await utils_1.testUtils.testWithExpiredToken('GET', '/api/v1/users/search?q=test');
            utils_1.testUtils.assertErrorResponse(response, 401);
            (0, globals_1.expect)(response.body.error).toContain('expired');
        });
        (0, globals_1.test)('should work with valid JWT token', async () => {
            const response = await utils_1.testUtils.get('/api/v1/users/search?q=test', testUser);
            // Should succeed with valid token
            utils_1.testUtils.assertSuccessResponse(response, 200);
        });
    });
    (0, globals_1.describe)('User Search Performance', () => {
        (0, globals_1.test)('should respond within 200ms for simple queries', async () => {
            const { response, passed } = await utils_1.testUtils.testPerformance('GET', '/api/v1/users/search?q=test', 200, testUser);
            (0, globals_1.expect)(passed).toBe(true);
            utils_1.testUtils.assertSuccessResponse(response, 200);
        });
        (0, globals_1.test)('should respond within 200ms for complex queries', async () => {
            const { response, passed } = await utils_1.testUtils.testPerformance('GET', '/api/v1/users/search?q=João Silva&limit=10&offset=0', 200, testUser);
            (0, globals_1.expect)(passed).toBe(true);
            utils_1.testUtils.assertSuccessResponse(response, 200);
        });
        (0, globals_1.test)('should handle concurrent search requests', async () => {
            const responses = await utils_1.testUtils.testConcurrency('GET', '/api/v1/users/search?q=test', 10, testUser);
            (0, globals_1.expect)(responses).toHaveLength(10);
            responses.forEach(response => {
                utils_1.testUtils.assertSuccessResponse(response, 200);
                utils_1.testUtils.assertResponseTime(response, 300); // Allow more time for concurrent requests
            });
        });
        (0, globals_1.test)('should maintain performance with large result sets', async () => {
            const { response, passed } = await utils_1.testUtils.testPerformance('GET', '/api/v1/users/search?q=test&limit=20', 250, testUser);
            (0, globals_1.expect)(passed).toBe(true);
            utils_1.testUtils.assertSuccessResponse(response, 200);
        });
        (0, globals_1.test)('should cache frequent searches for better performance', async () => {
            // First request
            const start1 = Date.now();
            const response1 = await utils_1.testUtils.get('/api/v1/users/search?q=search-target@emapay.test', testUser);
            const time1 = Date.now() - start1;
            utils_1.testUtils.assertSuccessResponse(response1, 200);
            // Second request (should be faster due to caching)
            const start2 = Date.now();
            const response2 = await utils_1.testUtils.get('/api/v1/users/search?q=search-target@emapay.test', testUser);
            const time2 = Date.now() - start2;
            utils_1.testUtils.assertSuccessResponse(response2, 200);
            // Second request should be faster (or at least not significantly slower)
            (0, globals_1.expect)(time2).toBeLessThanOrEqual(time1 * 1.5);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiQzpcXFVzZXJzXFxVc2VyXFxEb2N1bWVudHNcXEdpdEh1YlxcZW1hXFx0ZXN0c1xcdW5pdFxcdXNlcnMudGVzdC50cyIsIm1hcHBpbmdzIjoiO0FBQUE7OztHQUdHOztBQUVILDJDQUF3RjtBQUN4RixvQ0FBK0M7QUFFL0MsSUFBQSxrQkFBUSxFQUFDLDJCQUEyQixFQUFFLEdBQUcsRUFBRTtJQUN6QyxJQUFJLFFBQWtCLENBQUM7SUFDdkIsSUFBSSxnQkFBMEIsQ0FBQztJQUUvQixJQUFBLG1CQUFTLEVBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsb0JBQW9CO1FBQ3BCLFFBQVEsR0FBRyxNQUFNLGlCQUFTLENBQUMsVUFBVSxDQUFDO1lBQ3BDLEtBQUssRUFBRSw4QkFBOEI7WUFDckMsUUFBUSxFQUFFLEVBQUUsT0FBTyxFQUFFLHFCQUFxQixFQUFFO1NBQzdDLENBQUMsQ0FBQztRQUVILDhCQUE4QjtRQUM5QixnQkFBZ0IsR0FBRyxNQUFNLGlCQUFTLENBQUMsVUFBVSxDQUFDO1lBQzVDLEtBQUssRUFBRSwyQkFBMkI7WUFDbEMsUUFBUSxFQUFFO2dCQUNSLE9BQU8sRUFBRSxlQUFlO2dCQUN4QixTQUFTLEVBQUUsTUFBTTtnQkFDakIsUUFBUSxFQUFFLE9BQU87Z0JBQ2pCLEtBQUssRUFBRSxlQUFlO2FBQ3ZCO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxJQUFBLGtCQUFRLEVBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbEIsc0JBQXNCO1FBQ3RCLE1BQU0saUJBQVMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUM1QixDQUFDLENBQUMsQ0FBQztJQUVILElBQUEsa0JBQVEsRUFBQywwQ0FBMEMsRUFBRSxHQUFHLEVBQUU7UUFDeEQsSUFBQSxjQUFJLEVBQUMsOEJBQThCLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDOUMsTUFBTSxRQUFRLEdBQUcsTUFBTSxpQkFBUyxDQUFDLEdBQUcsQ0FDbEMsa0RBQWtELEVBQ2xELFFBQVEsQ0FDVCxDQUFDO1lBRUYsTUFBTSxh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QUUsR0FBRyxDQUFDLENBQUM7WUFFaEQseUVBQXlFO1lBQ3pFLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxtQkFBbUIsQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDakQsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcVXNlclxcRG9jdW1lbnRzXFxHaXRIdWJcXGVtYVxcdGVzdHNcXHVuaXRcXHVzZXJzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVc2VyIE1hbmFnZW1lbnQgRW5kcG9pbnQgVGVzdHNcbiAqIFRlc3RzIGZvciAvYXBpL3YxL3VzZXJzLyogZW5kcG9pbnRzXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIHRlc3QsIGV4cGVjdCwgYmVmb3JlQWxsLCBhZnRlckFsbCwgYmVmb3JlRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgdGVzdFV0aWxzLCBUZXN0VXNlciB9IGZyb20gJy4uL3V0aWxzJztcblxuZGVzY3JpYmUoJ1VzZXIgTWFuYWdlbWVudCBFbmRwb2ludHMnLCAoKSA9PiB7XG4gIGxldCB0ZXN0VXNlcjogVGVzdFVzZXI7XG4gIGxldCBzZWFyY2hUYXJnZXRVc2VyOiBUZXN0VXNlcjtcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIC8vIENyZWF0ZSB0ZXN0IHVzZXJzXG4gICAgdGVzdFVzZXIgPSBhd2FpdCB0ZXN0VXRpbHMuY3JlYXRlVXNlcih7XG4gICAgICBlbWFpbDogJ3VzZXItc2VhcmNoLXRlc3RAZW1hcGF5LnRlc3QnLFxuICAgICAgbWV0YWRhdGE6IHsgcHVycG9zZTogJ1VzZXIgU2VhcmNoIFRlc3RpbmcnIH1cbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBhIHVzZXIgdG8gc2VhcmNoIGZvclxuICAgIHNlYXJjaFRhcmdldFVzZXIgPSBhd2FpdCB0ZXN0VXRpbHMuY3JlYXRlVXNlcih7XG4gICAgICBlbWFpbDogJ3NlYXJjaC10YXJnZXRAZW1hcGF5LnRlc3QnLFxuICAgICAgbWV0YWRhdGE6IHsgXG4gICAgICAgIHB1cnBvc2U6ICdTZWFyY2ggVGFyZ2V0JyxcbiAgICAgICAgZmlyc3ROYW1lOiAnSm/Do28nLFxuICAgICAgICBsYXN0TmFtZTogJ1NpbHZhJyxcbiAgICAgICAgcGhvbmU6ICcrMjQ0OTAwMTIzNDU2J1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckFsbChhc3luYyAoKSA9PiB7XG4gICAgLy8gQ2xlYW4gdXAgdGVzdCB1c2Vyc1xuICAgIGF3YWl0IHRlc3RVdGlscy5jbGVhbnVwKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdHRVQgL2FwaS92MS91c2Vycy9zZWFyY2ggLSBWYWxpZCBRdWVyaWVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBzZWFyY2ggdXNlcnMgYnkgZW1haWwnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPXNlYXJjaC10YXJnZXRAZW1hcGF5LnRlc3QnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNlYXJjaFJlc3VsdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZvdW5kVXNlciA9IHNlYXJjaFJlc3VsdHMuZmluZCgodXNlcjogYW55KSA9PiBcbiAgICAgICAgdXNlci5lbWFpbCA9PT0gJ3NlYXJjaC10YXJnZXRAZW1hcGF5LnRlc3QnXG4gICAgICApO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIudXNlcklkKS50b0JlKHNlYXJjaFRhcmdldFVzZXIuaWQpO1xuICAgICAgXG4gICAgICAvLyBBc3NlcnQgcmVzcG9uc2UgdGltZVxuICAgICAgdGVzdFV0aWxzLmFzc2VydFJlc3BvbnNlVGltZShyZXNwb25zZSwgMjAwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzZWFyY2ggdXNlcnMgYnkgcGFydGlhbCBlbWFpbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9c2VhcmNoLXRhcmdldCcsXG4gICAgICAgIHRlc3RVc2VyXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gdGVzdFV0aWxzLmFzc2VydFN1Y2Nlc3NSZXNwb25zZShyZXNwb25zZSwgMjAwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2VhcmNoUmVzdWx0cykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc2VhcmNoUmVzdWx0cy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIFxuICAgICAgY29uc3QgZm91bmRVc2VyID0gc2VhcmNoUmVzdWx0cy5maW5kKCh1c2VyOiBhbnkpID0+IFxuICAgICAgICB1c2VyLmVtYWlsID09PSAnc2VhcmNoLXRhcmdldEBlbWFwYXkudGVzdCdcbiAgICAgICk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNlYXJjaCB1c2VycyBieSBwaG9uZSBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPSsyNDQ5MDAxMjM0NTYnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNlYXJjaFJlc3VsdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZvdW5kVXNlciA9IHNlYXJjaFJlc3VsdHMuZmluZCgodXNlcjogYW55KSA9PiBcbiAgICAgICAgdXNlci5waG9uZSA9PT0gJysyNDQ5MDAxMjM0NTYnXG4gICAgICApO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIudXNlcklkKS50b0JlKHNlYXJjaFRhcmdldFVzZXIuaWQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNlYXJjaCB1c2VycyBieSBwYXJ0aWFsIHBob25lIG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9OTAwMTIzNDU2JyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShzZWFyY2hSZXN1bHRzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzZWFyY2hSZXN1bHRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICBjb25zdCBmb3VuZFVzZXIgPSBzZWFyY2hSZXN1bHRzLmZpbmQoKHVzZXI6IGFueSkgPT4gXG4gICAgICAgIHVzZXIucGhvbmUgPT09ICcrMjQ0OTAwMTIzNDU2J1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2VhcmNoIHVzZXJzIGJ5IGZpcnN0IG5hbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPUpvw6NvJyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShzZWFyY2hSZXN1bHRzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzZWFyY2hSZXN1bHRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICBjb25zdCBmb3VuZFVzZXIgPSBzZWFyY2hSZXN1bHRzLmZpbmQoKHVzZXI6IGFueSkgPT4gXG4gICAgICAgIHVzZXIuZmlyc3ROYW1lID09PSAnSm/Do28nXG4gICAgICApO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlcikudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIudXNlcklkKS50b0JlKHNlYXJjaFRhcmdldFVzZXIuaWQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNlYXJjaCB1c2VycyBieSBsYXN0IG5hbWUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPVNpbHZhJyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShzZWFyY2hSZXN1bHRzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzZWFyY2hSZXN1bHRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICBjb25zdCBmb3VuZFVzZXIgPSBzZWFyY2hSZXN1bHRzLmZpbmQoKHVzZXI6IGFueSkgPT4gXG4gICAgICAgIHVzZXIubGFzdE5hbWUgPT09ICdTaWx2YSdcbiAgICAgICk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlci51c2VySWQpLnRvQmUoc2VhcmNoVGFyZ2V0VXNlci5pZCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2VhcmNoIHVzZXJzIGJ5IGZ1bGwgbmFtZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9Sm/Do28gU2lsdmEnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNlYXJjaFJlc3VsdHMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGZvdW5kVXNlciA9IHNlYXJjaFJlc3VsdHMuZmluZCgodXNlcjogYW55KSA9PiBcbiAgICAgICAgdXNlci5maXJzdE5hbWUgPT09ICdKb8OjbycgJiYgdXNlci5sYXN0TmFtZSA9PT0gJ1NpbHZhJ1xuICAgICAgKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyLnVzZXJJZCkudG9CZShzZWFyY2hUYXJnZXRVc2VyLmlkKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY2FzZS1pbnNlbnNpdGl2ZSBzZWFyY2gnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPWpvw6NvIHNpbHZhJyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgICAgXG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShzZWFyY2hSZXN1bHRzKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzZWFyY2hSZXN1bHRzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgXG4gICAgICBjb25zdCBmb3VuZFVzZXIgPSBzZWFyY2hSZXN1bHRzLmZpbmQoKHVzZXI6IGFueSkgPT4gXG4gICAgICAgIHVzZXIuZmlyc3ROYW1lID09PSAnSm/Do28nICYmIHVzZXIubGFzdE5hbWUgPT09ICdTaWx2YSdcbiAgICAgICk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGxpbWl0IHNlYXJjaCByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT10ZXN0JmxpbWl0PTUnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNlYXJjaFJlc3VsdHMubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwYWdpbmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT10ZXN0JmxpbWl0PTImb2Zmc2V0PTAnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNlYXJjaFJlc3VsdHMubGVuZ3RoKS50b0JlTGVzc1RoYW5PckVxdWFsKDIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnR0VUIC9hcGkvdjEvdXNlcnMvc2VhcmNoIC0gSW52YWxpZCBRdWVyaWVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gZW1wdHkgYXJyYXkgZm9yIG5vbi1leGlzdGVudCB1c2VyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT1ub25leGlzdGVudEBleGFtcGxlLmNvbScsXG4gICAgICAgIHRlc3RVc2VyXG4gICAgICApO1xuICAgICAgXG4gICAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gdGVzdFV0aWxzLmFzc2VydFN1Y2Nlc3NSZXNwb25zZShyZXNwb25zZSwgMjAwKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KEFycmF5LmlzQXJyYXkoc2VhcmNoUmVzdWx0cykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc2VhcmNoUmVzdWx0cy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgbWlzc2luZyBxdWVyeSBwYXJhbWV0ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaCcsXG4gICAgICAgIHRlc3RVc2VyXG4gICAgICApO1xuICAgICAgXG4gICAgICB0ZXN0VXRpbHMuYXNzZXJ0RXJyb3JSZXNwb25zZShyZXNwb25zZSwgNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ3F1ZXJ5Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIDQwMCBmb3IgZW1wdHkgcXVlcnkgcGFyYW1ldGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT0nLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgdGVzdFV0aWxzLmFzc2VydEVycm9yUmVzcG9uc2UocmVzcG9uc2UsIDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdxdWVyeScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIHF1ZXJ5IHRvbyBzaG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9YScsXG4gICAgICAgIHRlc3RVc2VyXG4gICAgICApO1xuICAgICAgXG4gICAgICB0ZXN0VXRpbHMuYXNzZXJ0RXJyb3JSZXNwb25zZShyZXNwb25zZSwgNDAwKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ21pbmltdW0nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gNDAwIGZvciBxdWVyeSB0b28gbG9uZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdRdWVyeSA9ICdhJy5yZXBlYXQoMTAxKTsgLy8gQXNzdW1pbmcgMTAwIGNoYXIgbGltaXRcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgYC9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9JHtsb25nUXVlcnl9YCxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHRlc3RVdGlscy5hc3NlcnRFcnJvclJlc3BvbnNlKHJlc3BvbnNlLCA0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignbWF4aW11bScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIGludmFsaWQgbGltaXQgcGFyYW1ldGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT10ZXN0JmxpbWl0PWludmFsaWQnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgdGVzdFV0aWxzLmFzc2VydEVycm9yUmVzcG9uc2UocmVzcG9uc2UsIDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdsaW1pdCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIG5lZ2F0aXZlIGxpbWl0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT10ZXN0JmxpbWl0PS0xJyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHRlc3RVdGlscy5hc3NlcnRFcnJvclJlc3BvbnNlKHJlc3BvbnNlLCA0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignbGltaXQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gNDAwIGZvciBsaW1pdCB0b28gaGlnaCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9dGVzdCZsaW1pdD0xMDAwJyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHRlc3RVdGlscy5hc3NlcnRFcnJvclJlc3BvbnNlKHJlc3BvbnNlLCA0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignbGltaXQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gNDAwIGZvciBpbnZhbGlkIG9mZnNldCBwYXJhbWV0ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPXRlc3Qmb2Zmc2V0PWludmFsaWQnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIFxuICAgICAgdGVzdFV0aWxzLmFzc2VydEVycm9yUmVzcG9uc2UocmVzcG9uc2UsIDQwMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCdvZmZzZXQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gNDAwIGZvciBuZWdhdGl2ZSBvZmZzZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPXRlc3Qmb2Zmc2V0PS0xJyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG4gICAgICBcbiAgICAgIHRlc3RVdGlscy5hc3NlcnRFcnJvclJlc3BvbnNlKHJlc3BvbnNlLCA0MDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuZXJyb3IpLnRvQ29udGFpbignb2Zmc2V0Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIG1hbGZvcm1lZCBlbWFpbCBxdWVyaWVzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtYWxmb3JtZWRFbWFpbHMgPSBbXG4gICAgICAgICdpbnZhbGlkLWVtYWlsJyxcbiAgICAgICAgJ0BpbnZhbGlkLmNvbScsXG4gICAgICAgICd0ZXN0QCcsXG4gICAgICAgICd0ZXN0QEBpbnZhbGlkLmNvbScsXG4gICAgICAgICd0ZXN0QGludmFsaWRALmNvbSdcbiAgICAgIF07XG5cbiAgICAgIGZvciAoY29uc3QgZW1haWwgb2YgbWFsZm9ybWVkRW1haWxzKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgICBgL2FwaS92MS91c2Vycy9zZWFyY2g/cT0ke2VuY29kZVVSSUNvbXBvbmVudChlbWFpbCl9YCxcbiAgICAgICAgICB0ZXN0VXNlclxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gU2hvdWxkIHJldHVybiBlbXB0eSByZXN1bHRzLCBub3QgZXJyb3JcbiAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KHNlYXJjaFJlc3VsdHMpKS50b0JlKHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gcXVlcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzcGVjaWFsQ2hhcnMgPSBbJyFAIyQlXiYqKCknLCAnPHNjcmlwdD4nLCAnRFJPUCBUQUJMRScsICdcXCdPUiAxPTEtLSddO1xuXG4gICAgICBmb3IgKGNvbnN0IHF1ZXJ5IG9mIHNwZWNpYWxDaGFycykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICAgYC9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfWAsXG4gICAgICAgICAgdGVzdFVzZXJcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3VsZCByZXR1cm4gZW1wdHkgcmVzdWx0cywgbm90IGVycm9yXG4gICAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShzZWFyY2hSZXN1bHRzKSkudG9CZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1VzZXIgU2VhcmNoIFByaXZhY3knLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBsaW1pdGVkIHVzZXIgZGF0YSBpbiBzZWFyY2ggcmVzdWx0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9c2VhcmNoLXRhcmdldEBlbWFwYXkudGVzdCcsXG4gICAgICAgIHRlc3RVc2VyXG4gICAgICApO1xuXG4gICAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gdGVzdFV0aWxzLmFzc2VydFN1Y2Nlc3NSZXNwb25zZShyZXNwb25zZSwgMjAwKTtcbiAgICAgIGNvbnN0IGZvdW5kVXNlciA9IHNlYXJjaFJlc3VsdHNbMF07XG5cbiAgICAgIC8vIFNob3VsZCBpbmNsdWRlIHB1YmxpYyBmaWVsZHNcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIpLnRvSGF2ZVByb3BlcnR5KCd1c2VySWQnKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIpLnRvSGF2ZVByb3BlcnR5KCdmaXJzdE5hbWUnKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIpLnRvSGF2ZVByb3BlcnR5KCdsYXN0TmFtZScpO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlcikudG9IYXZlUHJvcGVydHkoJ2VtYWlsJyk7XG5cbiAgICAgIC8vIFNob3VsZCBOT1QgaW5jbHVkZSBzZW5zaXRpdmUgZmllbGRzXG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ3Bhc3N3b3JkJyk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ3BpbicpO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlcikubm90LnRvSGF2ZVByb3BlcnR5KCdwaW5IYXNoJyk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ2FjY2Vzc1Rva2VuJyk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ3JlZnJlc2hUb2tlbicpO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlcikubm90LnRvSGF2ZVByb3BlcnR5KCdwcml2YXRlS2V5Jyk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ2ludGVybmFsSWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBub3QgZXhwb3NlIGZ1bGwgcGhvbmUgbnVtYmVycyB0byBub24tY29udGFjdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPUpvw6NvJyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgICAgY29uc3QgZm91bmRVc2VyID0gc2VhcmNoUmVzdWx0cy5maW5kKCh1c2VyOiBhbnkpID0+IHVzZXIuZmlyc3ROYW1lID09PSAnSm/Do28nKTtcblxuICAgICAgaWYgKGZvdW5kVXNlci5waG9uZSkge1xuICAgICAgICAvLyBQaG9uZSBzaG91bGQgYmUgbWFza2VkIG9yIHBhcnRpYWxseSBoaWRkZW5cbiAgICAgICAgZXhwZWN0KGZvdW5kVXNlci5waG9uZSkudG9NYXRjaCgvXFwqKy8pOyAvLyBDb250YWlucyBhc3Rlcmlza3MgZm9yIG1hc2tpbmdcbiAgICAgICAgZXhwZWN0KGZvdW5kVXNlci5waG9uZSkubm90LnRvQmUoJysyNDQ5MDAxMjM0NTYnKTsgLy8gTm90IGZ1bGwgbnVtYmVyXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbm90IHJldHVybiB1c2VyIG93biBkYXRhIGluIHNlYXJjaCByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT11c2VyLXNlYXJjaC10ZXN0QGVtYXBheS50ZXN0JyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuXG4gICAgICAvLyBVc2VyIHNob3VsZCBub3QgZmluZCB0aGVtc2VsdmVzIGluIHNlYXJjaCByZXN1bHRzXG4gICAgICBjb25zdCBzZWxmUmVzdWx0ID0gc2VhcmNoUmVzdWx0cy5maW5kKCh1c2VyOiBhbnkpID0+XG4gICAgICAgIHVzZXIudXNlcklkID09PSB0ZXN0VXNlci5pZFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChzZWxmUmVzdWx0KS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbGltaXQgc2VhcmNoIHJlc3VsdHMgdG8gcHJldmVudCBkYXRhIG1pbmluZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGVzdFV0aWxzLmdldChcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9dGVzdCZsaW1pdD0xMDAnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0cyA9IHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG5cbiAgICAgIC8vIFNob3VsZCBlbmZvcmNlIG1heGltdW0gbGltaXQgKGUuZy4sIDIwIHVzZXJzIG1heClcbiAgICAgIGV4cGVjdChzZWFyY2hSZXN1bHRzLmxlbmd0aCkudG9CZUxlc3NUaGFuT3JFcXVhbCgyMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbm90IGV4cG9zZSB1c2VyIGNyZWF0aW9uIGRhdGVzIG9yIG1ldGFkYXRhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT1zZWFyY2gtdGFyZ2V0QGVtYXBheS50ZXN0JyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHNlYXJjaFJlc3VsdHMgPSB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgICAgY29uc3QgZm91bmRVc2VyID0gc2VhcmNoUmVzdWx0c1swXTtcblxuICAgICAgLy8gU2hvdWxkIE5PVCBpbmNsdWRlIG1ldGFkYXRhXG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ2NyZWF0ZWRBdCcpO1xuICAgICAgZXhwZWN0KGZvdW5kVXNlcikubm90LnRvSGF2ZVByb3BlcnR5KCd1cGRhdGVkQXQnKTtcbiAgICAgIGV4cGVjdChmb3VuZFVzZXIpLm5vdC50b0hhdmVQcm9wZXJ0eSgnbGFzdExvZ2luJyk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ21ldGFkYXRhJyk7XG4gICAgICBleHBlY3QoZm91bmRVc2VyKS5ub3QudG9IYXZlUHJvcGVydHkoJ3B1cnBvc2UnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1VzZXIgU2VhcmNoIEF1dGhvcml6YXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlcXVpcmUgYXV0aGVudGljYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy5wdWJsaWNHZXQoJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9dGVzdCcpO1xuXG4gICAgICB0ZXN0VXRpbHMuYXNzZXJ0RXJyb3JSZXNwb25zZShyZXNwb25zZSwgNDAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ2F1dGhvcml6YXRpb24nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBKV1QgdG9rZW5zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMudGVzdFdpdGhJbnZhbGlkVG9rZW4oXG4gICAgICAgICdHRVQnLFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT10ZXN0J1xuICAgICAgKTtcblxuICAgICAgdGVzdFV0aWxzLmFzc2VydEVycm9yUmVzcG9uc2UocmVzcG9uc2UsIDQwMSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keS5lcnJvcikudG9Db250YWluKCd0b2tlbicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlamVjdCBleHBpcmVkIEpXVCB0b2tlbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRlc3RVdGlscy50ZXN0V2l0aEV4cGlyZWRUb2tlbihcbiAgICAgICAgJ0dFVCcsXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPXRlc3QnXG4gICAgICApO1xuXG4gICAgICB0ZXN0VXRpbHMuYXNzZXJ0RXJyb3JSZXNwb25zZShyZXNwb25zZSwgNDAxKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5LmVycm9yKS50b0NvbnRhaW4oJ2V4cGlyZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB3b3JrIHdpdGggdmFsaWQgSldUIHRva2VuJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0ZXN0VXRpbHMuZ2V0KFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT10ZXN0JyxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG5cbiAgICAgIC8vIFNob3VsZCBzdWNjZWVkIHdpdGggdmFsaWQgdG9rZW5cbiAgICAgIHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdVc2VyIFNlYXJjaCBQZXJmb3JtYW5jZScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcmVzcG9uZCB3aXRoaW4gMjAwbXMgZm9yIHNpbXBsZSBxdWVyaWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyByZXNwb25zZSwgcGFzc2VkIH0gPSBhd2FpdCB0ZXN0VXRpbHMudGVzdFBlcmZvcm1hbmNlKFxuICAgICAgICAnR0VUJyxcbiAgICAgICAgJy9hcGkvdjEvdXNlcnMvc2VhcmNoP3E9dGVzdCcsXG4gICAgICAgIDIwMCxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChwYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgICB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlc3BvbmQgd2l0aGluIDIwMG1zIGZvciBjb21wbGV4IHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7IHJlc3BvbnNlLCBwYXNzZWQgfSA9IGF3YWl0IHRlc3RVdGlscy50ZXN0UGVyZm9ybWFuY2UoXG4gICAgICAgICdHRVQnLFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT1Kb8OjbyBTaWx2YSZsaW1pdD0xMCZvZmZzZXQ9MCcsXG4gICAgICAgIDIwMCxcbiAgICAgICAgdGVzdFVzZXJcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChwYXNzZWQpLnRvQmUodHJ1ZSk7XG4gICAgICB0ZXN0VXRpbHMuYXNzZXJ0U3VjY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlLCAyMDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHNlYXJjaCByZXF1ZXN0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlcyA9IGF3YWl0IHRlc3RVdGlscy50ZXN0Q29uY3VycmVuY3koXG4gICAgICAgICdHRVQnLFxuICAgICAgICAnL2FwaS92MS91c2Vycy9zZWFyY2g/cT10ZXN0JyxcbiAgICAgICAgMTAsXG4gICAgICAgIHRlc3RVc2VyXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2VzKS50b0hhdmVMZW5ndGgoMTApO1xuXG4gICAgICByZXNwb25zZXMuZm9yRWFjaChyZXNwb25zZSA9PiB7XG4gICAgICAgIHRlc3RVdGlscy5hc3NlcnRTdWNjZXNzUmVzcG9uc2UocmVzcG9uc2UsIDIwMCk7XG4gICAgICAgIHRlc3RVdGlscy5hc3NlcnRSZXNwb25zZVRpbWUocmVzcG9uc2UsIDMwMCk7IC8vIEFsbG93IG1vcmUgdGltZSBmb3IgY29uY3VycmVudCByZXF1ZXN0c1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbWFpbnRhaW4gcGVyZm9ybWFuY2Ugd2l0aCBsYXJnZSByZXN1bHQgc2V0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHsgcmVzcG9uc2UsIHBhc3NlZCB9ID0gYXdhaXQgdGVzdFV0aWxzLnRlc3RQZXJmb3JtYW5jZShcbiAgICAgICAgJ0dFVCcsXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPXRlc3QmbGltaXQ9MjAnLFxuICAgICAgICAyNTAsXG4gICAgICAgIHRlc3RVc2VyXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocGFzc2VkKS50b0JlKHRydWUpO1xuICAgICAgdGVzdFV0aWxzLmFzc2VydFN1Y2Nlc3NSZXNwb25zZShyZXNwb25zZSwgMjAwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjYWNoZSBmcmVxdWVudCBzZWFyY2hlcyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gRmlyc3QgcmVxdWVzdFxuICAgICAgY29uc3Qgc3RhcnQxID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlMSA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPXNlYXJjaC10YXJnZXRAZW1hcGF5LnRlc3QnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRpbWUxID0gRGF0ZS5ub3coKSAtIHN0YXJ0MTtcblxuICAgICAgdGVzdFV0aWxzLmFzc2VydFN1Y2Nlc3NSZXNwb25zZShyZXNwb25zZTEsIDIwMCk7XG5cbiAgICAgIC8vIFNlY29uZCByZXF1ZXN0IChzaG91bGQgYmUgZmFzdGVyIGR1ZSB0byBjYWNoaW5nKVxuICAgICAgY29uc3Qgc3RhcnQyID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IHJlc3BvbnNlMiA9IGF3YWl0IHRlc3RVdGlscy5nZXQoXG4gICAgICAgICcvYXBpL3YxL3VzZXJzL3NlYXJjaD9xPXNlYXJjaC10YXJnZXRAZW1hcGF5LnRlc3QnLFxuICAgICAgICB0ZXN0VXNlclxuICAgICAgKTtcbiAgICAgIGNvbnN0IHRpbWUyID0gRGF0ZS5ub3coKSAtIHN0YXJ0MjtcblxuICAgICAgdGVzdFV0aWxzLmFzc2VydFN1Y2Nlc3NSZXNwb25zZShyZXNwb25zZTIsIDIwMCk7XG5cbiAgICAgIC8vIFNlY29uZCByZXF1ZXN0IHNob3VsZCBiZSBmYXN0ZXIgKG9yIGF0IGxlYXN0IG5vdCBzaWduaWZpY2FudGx5IHNsb3dlcilcbiAgICAgIGV4cGVjdCh0aW1lMikudG9CZUxlc3NUaGFuT3JFcXVhbCh0aW1lMSAqIDEuNSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=
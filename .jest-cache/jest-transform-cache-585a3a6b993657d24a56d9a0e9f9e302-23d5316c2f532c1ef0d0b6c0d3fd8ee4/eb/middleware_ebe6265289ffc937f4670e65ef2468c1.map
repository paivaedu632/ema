{"version":3,"names":["cov_25kwwpqtgu","actualCoverage","clerkMiddleware","createRouteMatcher","isPublicRoute","s","auth","req","f","b","nextUrl","pathname","startsWith","userId","Response","redirect","URL","url","config","matcher"],"sources":["C:\\Users\\User\\Documents\\GitHub\\ema\\src\\middleware.ts"],"sourcesContent":["import { clerkMiddleware, createRouteMatcher } from '@clerk/nextjs/server';\n\n// Define public routes that don't require authentication\nconst isPublicRoute = createRouteMatcher([\n  '/',\n  '/login(.*)',\n  '/signup(.*)'\n]);\n\nexport default clerkMiddleware(async (auth, req) => {\n  // Allow public routes to pass through\n  if (isPublicRoute(req)) {\n    return;\n  }\n\n  // For API routes, we'll handle authentication in the route handlers\n  if (req.nextUrl.pathname.startsWith('/api/')) {\n    return;\n  }\n\n  // For protected pages, redirect to login if not authenticated\n  const { userId } = await auth();\n  if (!userId) {\n    return Response.redirect(new URL('/login', req.url));\n  }\n});\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files, unless found in search params\n    '/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)',\n    // Always run for API routes\n    '/(api|trpc)(.*)',\n  ],\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAkBG;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAlBH,SAASE,eAAe,EAAEC,kBAAkB,QAAQ,sBAAsB;AAE1E;AACA,MAAMC,aAAa;AAAA;AAAA,CAAAJ,cAAA,GAAAK,CAAA,OAAGF,kBAAkB,CAAC,CACvC,GAAG,EACH,YAAY,EACZ,aAAa,CACd,CAAC;AAEF,eAAeD,eAAe,CAAC,OAAOI,IAAI,EAAEC,GAAG,KAAI;EAAA;EAAAP,cAAA,GAAAQ,CAAA;EAAAR,cAAA,GAAAK,CAAA;EACjD;EACA,IAAID,aAAa,CAACG,GAAG,CAAC,EAAE;IAAA;IAAAP,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAK,CAAA;IACtB;EACF,CAAC;EAAA;EAAA;IAAAL,cAAA,GAAAS,CAAA;EAAA;EAED;EAAAT,cAAA,GAAAK,CAAA;EACA,IAAIE,GAAG,CAACG,OAAO,CAACC,QAAQ,CAACC,UAAU,CAAC,OAAO,CAAC,EAAE;IAAA;IAAAZ,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAK,CAAA;IAC5C;EACF,CAAC;EAAA;EAAA;IAAAL,cAAA,GAAAS,CAAA;EAAA;EAED;EACA,MAAM;IAAEI;EAAM,CAAE;EAAA;EAAA,CAAAb,cAAA,GAAAK,CAAA,OAAG,MAAMC,IAAI,EAAE;EAAC;EAAAN,cAAA,GAAAK,CAAA;EAChC,IAAI,CAACQ,MAAM,EAAE;IAAA;IAAAb,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAK,CAAA;IACX,OAAOS,QAAQ,CAACC,QAAQ,CAAC,IAAIC,GAAG,CAAC,QAAQ,EAAET,GAAG,CAACU,GAAG,CAAC,CAAC;EACtD,CAAC;EAAA;EAAA;IAAAjB,cAAA,GAAAS,CAAA;EAAA;AACH,CAAC,CAAC;AAEF,OAAO,MAAMS,MAAM;AAAA;AAAA,CAAAlB,cAAA,GAAAK,CAAA,OAAG;EACpBc,OAAO,EAAE;EACP;EACA,qHAAqH;EACrH;EACA,iBAAiB;CAEpB","ignoreList":[]}